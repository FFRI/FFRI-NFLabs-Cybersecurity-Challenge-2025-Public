FROM ubuntu:24.04

RUN dpkg --add-architecture i386 && \
    apt-get update && \
    apt-get install -y --no-install-recommends \
        libc6:i386 \
        lib32z1 \
        libncurses6:i386 \
        libstdc++6:i386 \
        lib32gcc-s1 \
	socat \
        && apt-get clean \
	&& rm -rf /var/lib/apt/lists/*

WORKDIR /home/ctf
COPY ./vuln .
COPY flag.txt .
RUN chmod +x ./vuln

CMD ["socat", "TCP-LISTEN:8108,reuseaddr,fork", "EXEC:'./vuln'"]
