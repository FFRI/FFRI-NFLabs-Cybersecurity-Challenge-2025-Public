FROM ubuntu:24.04

ENV DEBIAN_FRONTEND=noninteractive

RUN apt update && \
    apt install -y --no-install-recommends gcc make socat && \
    apt clean && rm -rf /var/lib/apt/lists/*


WORKDIR /app

COPY bin/abnormal /app/abnormal
COPY flag.txt /app/flag.txt
RUN chmod +x /app/abnormal

CMD ["socat", "TCP-LISTEN:8101,reuseaddr,fork", "EXEC:'./abnormal'"]