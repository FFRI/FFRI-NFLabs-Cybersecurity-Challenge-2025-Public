# ベースイメージの指定
FROM ubuntu:24.04

# 作業ディレクトリの設定
WORKDIR /root

# 必要なパッケージのインストール
RUN apt-get update && \
    apt-get install -y \
      nodejs \
      npm \
      libnss3-tools \
      libatk1.0-0 \
      libatk-bridge2.0-0 \
      libcups2 \
      libxdamage1 \
      libxkbcommon-x11-0 \
      libpangocairo-1.0-0 \
      libasound2t64 \
      cron && \
      npm install dotenv

COPY ./victim/ /root/
COPY .env /root/.env

# crontab設定の追加

RUN echo "* *    * * *  root node /root/login_access.js" > /etc/cron.d/login_access

# crontabファイルのパーミッション設定
RUN chmod 0644 /etc/cron.d/login_access

# 必要なパッケージのインストール
RUN npm install puppeteer
